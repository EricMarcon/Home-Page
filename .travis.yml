language: r
dist: xenial
latex: false

branches:
  only:
    - master

cache:
  packages: true
  directories:
  - $HOME/.npm

before_script:
- nvm install node
- npm install -g netlify-cli
- Rscript -e 'blogdown::install_hugo()'
- mkdir public

script:
- Rscript -e 'blogdown::build_site(local = FALSE)'

after_success:
- ./deploy.sh
